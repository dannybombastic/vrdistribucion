if(window.ContactForm);else{class e{constructor(){this.form=document.querySelector("#contact form"),this.submitButton=this.form?.querySelector('button[type="submit"]'),this.isSubmitting=!1,this.nameField=null,this.emailField=null,this.phoneField=null,this.messageField=null,this.apiUrl=this.getApiUrl(),this.init()}getApiUrl(){return"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||"0.0.0.0"===window.location.hostname||"5500"===window.location.port?"http://127.0.0.1:8000/api/contact":"vrdistribucion.com"===window.location.hostname||"www.vrdistribucion.com"===window.location.hostname?"https://vrdistribucion.com/api/contact":void 0}init(){this.form&&(this.nameField=this.form.querySelector("#contact-name"),this.emailField=this.form.querySelector("#contact-email"),this.phoneField=this.form.querySelector("#contact-phone"),this.messageField=this.form.querySelector("#contact-message"),this.nameField&&this.emailField&&this.phoneField&&this.messageField&&this.attachEventListeners())}attachEventListeners(){this.form&&this.form.addEventListener("submit",(e=>this.handleSubmit(e))),this.submitButton&&this.submitButton.addEventListener("click",(e=>{this.form.querySelector("#contact-name"),this.form.querySelector("#contact-email"),this.form.querySelector("#contact-phone"),this.form.querySelector("#contact-message")})),this.addRealTimeValidation()}async handleSubmit(e){if(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.isSubmitting)return;if(!this.validateForm())return;const t=this.getFormData();try{this.setSubmitting(!0);const e=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),i=await e.json();e.ok&&i.success?(this.showSuccess(i.message),this.resetForm()):this.showError(i.error||"Error al enviar el mensaje")}catch(e){this.showError("Error de conexión. Por favor intenta nuevamente.")}finally{this.setSubmitting(!1)}}getFormData(){return{name:this.nameField?.value.trim()||"",email:this.emailField?.value.trim()||"",phone:this.phoneField?.value.trim()||"",message:this.messageField?.value.trim()||"",timestamp:(new Date).toISOString()}}validateForm(){let e=!0;return this.nameField?.value.trim()?this.nameField.value.trim().length<2&&(this.showFieldError("name-error","El nombre debe tener al menos 2 caracteres"),e=!1):(this.showFieldError("name-error","El nombre es obligatorio"),e=!1),this.emailField?.value.trim()?this.isValidEmail(this.emailField.value.trim())||(this.showFieldError("email-error","Por favor ingresa un email válido"),e=!1):(this.showFieldError("email-error","El email es obligatorio"),e=!1),this.phoneField?.value.trim()&&!this.isValidPhone(this.phoneField.value.trim())&&(this.showFieldError("phone-error","Por favor ingresa un teléfono válido"),e=!1),this.messageField?.value.trim()?this.messageField.value.trim().length<5&&(this.showFieldError("message-error","El mensaje debe tener al menos 5 caracteres"),e=!1):(this.showFieldError("message-error","El mensaje es obligatorio"),e=!1),e}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}isValidPhone(e){if(!e||""===e.trim())return!0;const t=e.replace(/[\s\-\(\)\.\+]/g,"");if(!/^\d+$/.test(t))return!1;const i=t.length;return i>=7&&i<=15}addRealTimeValidation(){["#contact-name","#contact-email","#contact-phone","#contact-message"].forEach((e=>{const t=this.form.querySelector(e);t&&(t.addEventListener("blur",(()=>this.validateField(t))),t.addEventListener("input",(()=>this.clearFieldError(t))))}))}validateField(e){const t=e.id,i=e.value.trim();switch(t){case"contact-name":i?i.length<2&&this.showFieldError("name-error","El nombre debe tener al menos 2 caracteres"):this.showFieldError("name-error","El nombre es obligatorio");break;case"contact-email":i?this.isValidEmail(i)||this.showFieldError("email-error","Por favor ingresa un email válido"):this.showFieldError("email-error","El email es obligatorio");break;case"contact-phone":i&&!this.isValidPhone(i)&&this.showFieldError("phone-error","Por favor ingresa un teléfono válido");break;case"contact-message":i?i.length<5&&this.showFieldError("message-error","El mensaje debe tener al menos 5 caracteres"):this.showFieldError("message-error","El mensaje es obligatorio");break}}showFieldError(e,t){const i=document.getElementById(e);i&&(i.textContent=t,i.style.display="block")}clearFieldError(e){let t="";switch(e.id){case"contact-name":t="name-error";break;case"contact-email":t="email-error";break;case"contact-phone":t="phone-error";break;case"contact-message":t="message-error";break}if(t){const e=document.getElementById(t);e&&(e.style.display="none",e.textContent="")}}clearErrors(){this.form.querySelectorAll(".error-message").forEach((e=>{e.style.display="none",e.textContent=""}))}showSuccess(e){const t=document.getElementById("form-success-message");t&&(t.textContent=e,t.style.display="block",setTimeout((()=>{t.style.display="none"}),5e3))}showError(e){const t=document.getElementById("form-general-error");t&&(t.textContent=e,t.style.display="block")}setSubmitting(e){this.isSubmitting=e,this.submitButton&&(this.submitButton.disabled=e,this.submitButton.textContent=e?"Enviando...":"Enviar Mensaje")}resetForm(){this.form.reset(),this.clearErrors()}}document.addEventListener("DOMContentLoaded",(()=>{new e})),window.ContactForm=e}